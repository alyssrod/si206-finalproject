import matplotlib.pyplot as plt
import sqlite3

def get_song_platform_data(cur):
    cur.execute("SELECT song_name, number_platforms FROM song_ids JOIN songlink_data ON song_ids.id = songlink_data.song_id")
    rows = cur.fetchall()
    return rows

def plot_bar_chart(data):
    songs, platforms = zip(*data)
    
    plt.figure(figsize=(10, 6))
    plt.bar(songs, platforms, color='skyblue')
    plt.xlabel('Songs')
    plt.ylabel('Number of Platforms')
    plt.title('Number of Platforms per Song')
    plt.xticks(rotation=45, ha='right')
    plt.tight_layout()
    
    plt.show()

conn = sqlite3.connect('final-database.db')
cur = conn.cursor()

song_platform_data = get_song_platform_data(cur)

plot_bar_chart(song_platform_data)

conn.close()
